(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{99:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return w}));var c=a(29),n=a(0),l=a.n(n),o={actualScreen:"formParameters",typeDate:"hour",location:{lat:0,lng:0},actualLocation:{lat:0,lng:0},zoom:4,request:{loading:!1,success:!1,error:null,data:null},fetchData:{startDate:"",endDate:""}},r=a(30),s="SET_LOCATION",i="SET_ACTUAL_LOCATION",d="RESULTS_FETCH_REQUEST",u="RESULTS_FETCH_SUCCESS",p="RESULTS_FETCH_FAILURE",j="RESET_STATE",b="SET_ZOOM",y="SET_SCREEN",h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(r.a)(Object(r.a)({},e),{},{zoom:t.payload.zoom});case s:return Object(r.a)(Object(r.a)({},e),{},{location:t.payload});case i:return Object(r.a)(Object(r.a)({},e),{},{actualLocation:t.payload});case d:return Object(r.a)(Object(r.a)({},e),{},{request:Object(r.a)(Object(r.a)({},e.request),{},{loading:!0})});case u:return Object(r.a)(Object(r.a)({},e),{},{request:Object(r.a)(Object(r.a)({},e.request),{},{loading:!1,success:!0,data:t.payload})});case p:return Object(r.a)(Object(r.a)({},e),{},{request:Object(r.a)(Object(r.a)({},e.request),{},{loading:!1,success:!1,error:t.payload})});case j:return Object(r.a)({},o);case y:return Object(r.a)(Object(r.a)({},e),{},{actualScreen:t.payload});case t.SET_TYPE_DATE:return Object(r.a)(Object(r.a)({},e),{},{typeDate:t.payload,fetchData:Object(r.a)(Object(r.a)({},e.fetchData),{},{startDate:"",endDate:""})})}},O=a(96),m=a(33),g="http://localhost:5000",f=a(25),x=a.n(f),T=a(31),v=a(77),S=a.n(v);function E(){return(E=Object(T.a)(x.a.mark((function e(t,a,c,n){var l,o,r,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.REQUEST,o=a.SUCCESS,r=a.FAILURE,console.log("callApi",t),e.prev=2,n({type:l}),e.next=6,S()({method:"POST",url:g+t,data:c,headers:{"Content-Type":"application/json"}});case 6:s=e.sent,i=s.data,n({type:o,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n({type:r,payload:e.t0});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}var L=a(34),C=a(32),_=a(1),A=["places"],D={width:"100vw",height:"100vh"},U={styles:[{featureType:"administrative",elementType:"all",stylers:[{visibility:"on"},{lightness:33}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2e5d4"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#c5dac6"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"},{lightness:20}]},{featureType:"road",elementType:"all",stylers:[{lightness:20}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#c5c6c6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#e4d7c6"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#fbfaf7"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"on"},{color:"#acbcc9"}]}],disableDefaultUI:!0,zoomControl:!0},N=function(e){var t=e.state,a=e.dispatch;l.a.useEffect((function(){navigator.geolocation.getCurrentPosition((function(e){0==t.location.lat&&(h({lat:e.coords.latitude,lng:e.coords.longitude}),a({type:i,payload:{lat:e.coords.latitude,lng:e.coords.longitude}}),a({type:s,payload:{lat:e.coords.latitude,lng:e.coords.longitude}}))}))}),[]);var n=l.a.useState(null),o=Object(c.a)(n,2),j=o[0],h=o[1],g=Object(O.c)({googleMapsApiKey:"AIzaSyD2_N9L9MJjiIgQxhEOQx7AMIunkoIiZtA",libraries:A}),f=g.isLoaded,x=g.loadError,T=function(e,t){!function(e,t,a,c){E.apply(this,arguments)}("/montly/",{REQUEST:d,SUCCESS:u,FAILURE:p},{longitude:t,latitude:e,start:2018,end:2018},a)};return Object(_.jsxs)("div",{style:{marginTop:"13vh",overflowX:"hidden",textAlign:"center"},children:[Object(_.jsx)("h4",{children:"Get information about sunshine in your area."}),Object(_.jsx)("br",{}),Object(_.jsx)("h3",{children:"Select your location"}),x?Object(_.jsx)("div",{children:"Error al cargar el mapa"}):f?Object(_.jsxs)("div",{className:"map_container",children:[Object(_.jsxs)("div",{className:"search_container",children:[Object(_.jsx)("div",{className:"search_input",children:Object(_.jsx)(m.b,{center:t.actualLocation,changeLocation:function(e,t){L.b.success("Location changed",Object(r.a)({},C.b)),a({type:s,payload:{lat:e,lng:t}}),a({type:i,payload:{lat:e,lng:t}}),setTimeout((function(){a({type:b,payload:{zoom:15}})}),1e3)}})}),Object(_.jsx)("button",{className:"my_button",disabled:t.request.loading||null===t.location.lat,onClick:function(){a({type:s,payload:j}),a({type:i,payload:j})},children:"Go to my location"})]}),Object(_.jsx)(O.a,{options:U,mapContainerStyle:D,zoom:t.zoom,onClick:function(e){t.request.loading||(L.b.success("Location changed",Object(r.a)({},C.b)),a({type:s,payload:{lat:e.latLng.lat(),lng:e.latLng.lng()}}),T(e.latLng.lat(),e.latLng.lng()))},center:t.actualLocation,children:Object(_.jsx)(O.b,{position:t.location},t.actualLocation.lat)}),Object(_.jsx)("div",{className:"next_step_container",children:Object(_.jsx)("button",{className:"my_button",disabled:t.request.loading||null===t.location.lat,onClick:function(){a({type:y,payload:"formParameters"})},children:"Next step"})})]}):Object(_.jsx)("div",{children:"Cargando mapa"})]})},k=a(98),R=a(63);function q(e){var t=e.state,a=e.dispatch,n=l.a.useState(""),o=Object(c.a)(n,2),r=o[0],s=o[1];return Object(_.jsxs)(R.a,{className:"form_parameters",children:[Object(_.jsx)("button",{onClick:function(){a({type:y,payload:"selectLocation"})},className:"my_button mb-4",children:"Go back to the map"}),Object(_.jsx)("h3",{children:"Parameters"}),Object(_.jsxs)(k.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(_.jsxs)(k.a.Group,{children:[Object(_.jsx)(k.a.Label,{children:"Select type of date"}),Object(_.jsxs)(k.a.Control,{as:"select",value:null===t||void 0===t?void 0:t.typeDate,onChange:function(e){s(e.target.value)},children:[Object(_.jsx)("option",{value:"",children:"Select type"}),Object(_.jsx)("option",{value:"year",children:"Year"}),Object(_.jsx)("option",{value:"month",children:"Month"}),Object(_.jsx)("option",{value:"day",children:"Day"}),Object(_.jsx)("option",{value:"hour",children:"Hour"})]})]}),"year"===r?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(k.a.Group,{children:[Object(_.jsx)(k.a.Label,{children:"Select Year initial"}),Object(_.jsx)(k.a.Control,{type:"number",placeholder:"Enter Year initial"})]}),Object(_.jsxs)(k.a.Group,{children:[Object(_.jsx)(k.a.Label,{children:"Select Year final"}),Object(_.jsx)(k.a.Control,{type:"number",placeholder:"Enter Year final"})]})]}):null]})]})}function w(){var e=l.a.useReducer(h,o),t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(_.jsx)(_.Fragment,{children:"selectLocation"===(null===a||void 0===a?void 0:a.actualScreen)?Object(_.jsx)(N,{state:a,dispatch:n}):Object(_.jsx)(q,{state:a,dispatch:n})})}}}]);
//# sourceMappingURL=4.87a80b64.chunk.js.map